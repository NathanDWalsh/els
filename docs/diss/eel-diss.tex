% MSc dissertation example file, February 2022
%
% Leave one of the documentclass lines uncommented to match your degree.
% You may remove the logo option if it causes problems.
% Do not change any other options.
% \documentclass[logo,msc,adi]{infthesis}     % Adv Design Inf
% \documentclass[logo,msc,ai]{infthesis}      % AI
% \documentclass[logo,msc,cogsci]{infthesis}  % Cognitive Sci
% \documentclass[logo,msc,cs]{infthesis}      % Computer Sci
% \documentclass[logo,msc,cyber]{infthesis}   % Cyber Sec
% \documentclass[logo,msc,datasci]{infthesis} % Data Sci
% \documentclass[logo,msc,di]{infthesis}      % Design Inf
% \documentclass[logo,msc,dsti]{infthesis}    % Data Sci TI
\documentclass[logo,msc,inf]{infthesis}     % Informatics
% \documentclass[logo,msc]{infthesis}           % degree unspecified, do not change except to add your degree
%%%%%%%%%%%%%%%%%%%%%%%%
% Understand any problems and seek approval before assuming it's ok to remove ugcheck.

\usepackage{msccheck}

% \usepackage{microtype} % recommended, but you can remove if it causes problems

% Include any packages you need below, but don't include any that change the page
% layout or style of the dissertation. By including the ugcheck package above,
% you should catch most accidental changes of page layout though.

% \usepackage{markdown}
% \usepackage{verbatim}
\usepackage{svg} 
\usepackage{natbib}
\usepackage{xstring}
\usepackage{catchfile}
% \usepackage{citep}


% \renewcommand{\includesvg}[2][]{
%     \StrBefore{#2}{.}[\filename]
%     \immediate\write18{svg2pdf #2 \filename.pdf}
%     \noindent\includegraphics[width=\textwidth]{\filename.pdf}
% }

    

\renewcommand{\includesvg}[2][]{
    \StrBefore{#2}{.}[\filepath]
    \StrBetween{#2}{/}{.}[\filename]
    
    % \immediate\write18{pwsh -Command "Start-Sleep -Seconds 1"}
    \immediate\write18{pwsh -Command "cat #2 | python ../adjust_viewbox.py 50 40 -100 -40 > \filepath_adjusted.svg"}
    % \immediate\write18{pwsh -Command "mv \filepath.tmp #2 -Force"}
    \immediate\write18{xml sel -t -v "(//text())[last()]" #2 > \filepath.txt}
    \immediate\write18{svg2pdf \filepath_adjusted.svg \filepath.pdf}

    \begin{figure}[ht]
        \centering
        \includegraphics[width=\textwidth]{\filepath.pdf}

        \newcommand{\filecontent}{}
        \CatchFileDef{\filecontent}{\filepath.txt}{}
        
        \caption{\filecontent}

        % \caption{\verbatiminput{\filepath.txt}}
        \label{fig:\filename}
    \end{figure}
    % \noindent\includegraphics[width=\textwidth]{\filename.pdf}
}


\begin{document}
\begin{preliminary}

    \title{eel (easy extract load): Human-Readable Declarative Extract-Load Configuration Language \& System}

    \author{Nathan Walsh5678}

    \date{\today}

    \abstract{
        \input{abstract.tex}
    }

    \maketitle

    \newenvironment{ethics}
    {\begin{frontenv}{Research Ethics Approval}{\LARGE}}
            {\end{frontenv}\newpage}

    \begin{ethics}
        \textbf{Instructions:} \emph{Agree with your supervisor which
            statement you need to include. Then delete the statement that you are not using,
            and the instructions in italics.\\
            \textbf{Either complete and include this statement:}}\\ % DELETE THESE INSTRUCTIONS
        %
        % IF ETHICS APPROVAL WAS REQUIRED:
        This project obtained approval from the Informatics Research Ethics committee.\\
        Ethics application number: ???\\
        Date when approval was obtained: YYYY-MM-DD\\
        %
        \emph{[If the project required human participants, edit as appropriate, otherwise delete:]}\\ % DELETE THIS LINE
        The participants' information sheet and a consent form are included in the appendix.\\
        %
        % IF ETHICS APPROVAL WAS NOT REQUIRED:
        \textbf{\emph{Or include this statement:}}\\ % DELETE THIS LINE
        This project was planned in accordance with the Informatics Research
        Ethics policy. It did not involve any aspects that required approval
        from the Informatics Research Ethics committee.

        \standarddeclaration
    \end{ethics}


    \begin{acknowledgements}
        Any acknowledgements go here.
    \end{acknowledgements}


    \tableofcontents
\end{preliminary}


\input{body.tex}

\bibliographystyle{plain}
\bibliography{mybibfile}


% You may delete everything from \appendix up to \end{document} if you don't need it.
\appendix

\chapter{First appendix}

\section{First section}

Any appendices, including any required ethics information, should be included
after the references.

Markers do not have to consider appendices. Make sure that your contributions
are made clear in the main body of the dissertation (within the page limit).

\chapter{Participants' information sheet}

If you had human participants, include key information that they were given in
an appendix, and point to it from the ethics declaration.

\chapter{Participants' consent form}

If you had human participants, include information about how consent was
gathered in an appendix, and point to it from the ethics declaration.


\end{document}
