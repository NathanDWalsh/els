name: Release

on:
  push:
    branches:
      - main
jobs:
  bump-version:
    runs-on: ubuntu-latest
    permissions:                # Job-level permissions configuration starts here
      contents: write           # 'write' access to repository contents
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        # with:
        #   sparse-checkout: |
        #     pyproject.toml
      - name: Python Semantic Release
        uses: python-semantic-release/python-semantic-release@v9.15.2
        with:
          git_committer_email: 41898282+github-actions[bot]@users.noreply.github.com
          git_committer_name: "github-actions[bot]"

      # - name: Bump version
      #   run: |
      #     git config user.name "github-actions[bot]"
      #     git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
      #     git add .
      #     python -m pip install python-semantic-release
      #     python -m semantic_release version --patch
      #     git commit -m "Bumped version to $(cat pyproject.toml | grep version | cut -d\" -f2)"
      #     git tag -a "v$(cat pyproject.toml | grep version | cut -d\"\" -f2)"
      #     git push
      # - name: Commit and tag
      #   run: |
      #     # Note: the following account information will not work on GHES
      #     git config user.name "github-actions[bot]"
      #     git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
      #     git add pyproject.toml
      #     git commit -m "Bumped version to $(cat pyproject.toml | grep version | cut -d\" -f2)"
      #     git tag -a "v$(cat pyproject.toml | grep version | cut -d\"\" -f2)"
      #     git push
